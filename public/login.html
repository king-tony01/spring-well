<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Your Trusted Banking Partner. Empowering Your Financial Journey"
    />
    <meta name="keywords" content="Banking,Financial" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="stylesheet" href="/public/signup.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!--<link rel="stylesheet" href="/fontawesome-free-6.3.0-web/css/all.css" /> -->
    <title>Springwell Trust | Login</title>
  </head>
  <body>
    <div class="image"><img src="/images/image-03.jpg" alt="" /></div>
    <form>
      <h2>Login</h2>
      <p>Welcome back!, sign in to continue.</p>

      <div class="input-field">
        <i class="fas fa-user"></i
        ><input type="number" name="id" id="id" placeholder="ID" />
      </div>
      <div class="input-field">
        <i class="fas fa-lock"></i
        ><input
          type="password"
          name="password"
          id="password"
          placeholder="Password"
        />
        <i class="fas fa-eye-slash"></i>
      </div>

      <br />
      <button type="submit" id="submit">Login</button>
    </form>
    <script>
      const btn = document.getElementById("submit");
      btn.addEventListener("click", async (e) => {
        e.preventDefault();
        btn.textContent = "Loging in...";
        const form = new FormData(document.querySelector("form"));
        const details = {
          id_no: form.get("id"),
          password: form.get("password"),
        };

        const response = await fetch(`${location.origin}/login`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(details),
        });
        const data = await response.json();
        console.log(data);
        if (data.stat) {
          location.assign(`${location.origin}/homepage?u=${data.data.id}`);
        } else {
          alert(data.message);
        }
      });

      let reveal = document.querySelector(".fa-eye-slash");
      let passwordInput = document.getElementById("password");
      reveal.addEventListener("click", () => {
        reveal.classList.toggle("fa-eye");
        if (reveal.classList.contains("fa-eye")) {
          passwordInput.setAttribute("type", "text");
        } else {
          passwordInput.setAttribute("type", "password");
        }
      });
    </script>
  </body>
</html>
